{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "models": [
            "Agent"
        ],
        "stores": [
            "AuthenticatedAgent"
        ],
        "views": [
            "SpmViewport"
        ],
        "designer|userClassName": "SecurityController",
        "designer|userAlias": "securityController"
    },
    "designerId": "8eeac2c0-eb6f-48cc-8cc7-cb0598f14380",
    "cn": [
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|displayName": "appContainer",
                "ref": "appContainer",
                "selector": "appContainer",
                "xtype": "appContainer"
            },
            "designerId": "1daef7c3-d7a3-4629-b099-58cf6dc65bc7"
        },
        {
            "type": "controllerref",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "ref": "loginWindow",
                "selector": "loginWindow",
                "xtype": "loginWindow"
            },
            "designerId": "1e94a528-9350-4229-9324-c946f634765e"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onPerformAuthentication",
                "designer|params": [
                    "credentials"
                ],
                "implHandler": [
                    "Ext.Ajax.request({",
                    "    url: 'j_spring_security_check',",
                    "    params: credentials,",
                    "    success: function(response) {",
                    "        Spm.application.fireEvent('authenticated', false);",
                    "    }",
                    "});"
                ],
                "name": "performAuthentication",
                "scope": "this"
            },
            "designerId": "3464321a-b1e6-48e7-bf85-8550a19b8c00"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onAuthenticated",
                "designer|params": [
                    "alreadyAuthenticated"
                ],
                "implHandler": [
                    "if(!alreadyAuthenticated) {",
                    "    this.getAuthenticatedAgentStore().load();",
                    "\tthis.getLoginWindow().close();",
                    "}",
                    "this.getAppContainer().setVisible(true);"
                ],
                "name": "authenticated",
                "scope": "this"
            },
            "designerId": "c6fbaa9b-9752-4420-9152-e739ca17be6c"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onAuthenticationRequired",
                "designer|params": [
                    "response"
                ],
                "implHandler": [
                    "this.getAppContainer().setVisible(false);",
                    "Ext.create('Spm.view.LoginWindow').show();"
                ],
                "name": "authenticationRequired",
                "scope": "this"
            },
            "designerId": "73cc98d7-f774-47ea-80d4-0c2d96eb123f"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onStartAuthentication",
                "implHandler": [
                    "this.getAuthenticatedAgentStore().load(",
                    "{",
                    "    callback : function(records,operation,success){",
                    "        if(success) {",
                    "            Spm.application.fireEvent('authenticated', true);",
                    "        }",
                    "    }",
                    "});"
                ],
                "name": "startAuthentication",
                "scope": "this"
            },
            "designerId": "145088c1-7508-4980-b3b2-26fb8cf81228"
        },
        {
            "type": "applicationaction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "onLogout",
                "implHandler": [
                    "Ext.Ajax.request({",
                    "    url: 'j_spring_security_logout',",
                    "    success: function(response) {",
                    "        Spm.application.fireEvent('authenticationRequired');",
                    "    }",
                    "});"
                ],
                "name": "logout",
                "scope": "this"
            },
            "designerId": "58ccb058-3e81-45c3-b115-4c2151c32926"
        }
    ]
}